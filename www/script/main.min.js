'use strict';var input1=document.querySelector('.input-val1'),input2=document.querySelector('.input-val2'),selectFrom=document.querySelector('.select-from'),selectTo=document.querySelector('.select-to'),content=document.querySelector('.content'),spinner=document.querySelector('.spinner'),main=document.querySelector('.main'),error=document.querySelector('.error'),submit=document.querySelector('.submit'),choice1=new Choices('.select-from'),choice2=new Choices('.select-to');submit.onclick=clickHandler;function onDeviceReady(){work()}function requestFunc(){return new Promise(function(a,b){var d=new XMLHttpRequest;d.open('GET','https://www.cbr-xml-daily.ru/daily_json.js'),d.onload=function(){200===d.status?a(d.response):b(Error('Error, status: '+d.statusText))},d.onerror=function(){b('Error, problem with Network')},d.send()})}async function getValutes(){try{var a;let b=await requestFunc();a=JSON.parse(b),a.Valute.RUB={Value:1},console.log(a),window.data=a,main.classList.add('active'),content.classList.add('active')}catch(b){showNetErr(b)}}function checkConnection(){if(!window.navigator.onLine)throw new Error('No internet connection')}function showNetErr(a){console.error(a),swal({title:'Oops...',html:'Problem with your internet connection!<br>Sorry, our app need internet.',type:'error',showCloseButton:!0,showCancelButton:!0,allowOutsideClick:!1,confirmButtonText:'Retry',cancelButtonText:'<span>Exit<span>'}).then(function(){work()},function(b){'cancel'===b&&navigator.app.exitApp()})}function work(){spinner.classList.remove('off');try{checkConnection(),getValutes()}catch(a){showNetErr(a)}spinner.classList.add('off')}function clickHandler(){var a=selectFrom.value,b=selectTo.value,c=data.Valute[a].Value/data.Valute[b].Value,d=parseFloat(input1.value),f=parseFloat(input2.value);d&&(input2.parentElement.classList.add('is-dirty'),input2.value=d*c)}onDeviceReady();