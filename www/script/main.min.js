'use strict';var input1=document.querySelector('#input1'),input2=document.querySelector('#input2'),input1Placeholder=document.querySelector('#input1-name'),input2Placeholder=document.querySelector('#input2-name'),selectFrom=document.querySelector('.select-from'),selectTo=document.querySelector('.select-to'),content=document.querySelector('.content'),spinner=document.querySelector('.spinner'),main=document.querySelector('.main'),error=document.querySelector('.error'),submit=document.querySelector('.submit');changePlaceholder1(),selectFrom.onchange=changePlaceholder1,changePlaceholder2(),selectTo.onchange=changePlaceholder2;var choice1=new Choices('.select-from',{searchEnabled:!1}),choice2=new Choices('.select-to',{searchEnabled:!1});submit.onclick=clickHandler,document.addEventListener('deviceready',onDeviceReady,!1);function onDeviceReady(){work()}function requestFunc(){return new Promise(function(a,b){var d=new XMLHttpRequest;d.open('GET','https://www.cbr-xml-daily.ru/daily_json.js'),d.onload=function(){200===d.status?a(d.response):b(Error('Error, status: '+d.statusText))},d.onerror=function(){b('Error, problem with Network')},d.send()})}async function getValutes(){try{var a,b=await requestFunc();a=JSON.parse(b),a.Valute.RUB={Value:1},console.log(a),window.data=a,main.classList.add('active'),content.classList.add('active')}catch(c){showNetErr(c)}}function checkConnection(){if(!window.navigator.onLine)throw new Error('No internet connection')}function showNetErr(a){console.error(a),swal({title:'Oops...',html:'Problem with your internet connection!<br>Sorry, our app need internet.',type:'error',showCloseButton:!0,showCancelButton:!0,allowOutsideClick:!1,confirmButtonText:'Retry',cancelButtonText:'Exit'}).then(function(){work()},function(b){'cancel'===b?navigator.app.exitApp():'close'==b&&work()})}function work(){spinner.classList.remove('off');try{checkConnection(),getValutes()}catch(a){showNetErr(a)}spinner.classList.add('off')}function gotFS(a){a.root.getFile('cache.json',{create:!0,exclusive:!1},gotFileEntry,fail)}function gotFileEntry(a){a.createWriter(gotFileWriter,fail)}function gotFileWriter(a){a.onwriteend=function(){console.log('Data cashed')},a.write(JSON.stringify(data))}function fail(a){throw new Error(a)}function clickHandler(){var a=selectFrom.value,b=selectTo.value,c=data.Valute[a].Value/data.Valute[b].Value,d=parseFloat(input1.value);isNaN(d)||(input2.parentElement.classList.add('is-dirty'),input2.value=d*c)}function changePlaceholder1(){input1Placeholder.innerHTML=selectFrom.value}function changePlaceholder2(){input2Placeholder.innerHTML=selectTo.value}